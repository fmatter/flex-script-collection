{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#flex-script-collection","title":"FLEx script collection","text":"<p>This is a collection of scripts for SIL's FieldWorks projects. Download a ZIP from github or <code>git clone https://github.com/fmatter/flex-script-collection</code>. It is recommended to use a virtual environment, to run the setup:</p> <pre><code>pip install -r requirements.txt\n</code></pre> <p>Then you can execute individual scripts.</p>"},{"location":"#contributing-a-script","title":"Contributing a script","text":"<p>To contribute a useful script, fork the github repository and add the following files to your fork:</p> <ol> <li>a <code>my_script.*</code> file; ideally with:<ul> <li>name and contact info</li> <li>comments where necessary (!)</li> <li>a license</li> </ul> </li> <li>a <code>docs/my_script.md</code> file with least basic instructions</li> </ol> <p>Add necessary packages to <code>requirements.txt</code>. Look at existing scripts to compare. Run <code>mkdocs serve</code> and visit <code>localhost:8000</code>. Finally, create a pull request.</p>"},{"location":"#other-software","title":"Other software","text":"<ul> <li>cldflex</li> <li>flexpy</li> <li>...</li> </ul>"},{"location":"scripts/fix_audio_path/","title":"Modify all audio paths","text":"<p>This script iterates a <code>.lift</code> export and modifies the <code>href</code> attribute of every <code>media</code> tag. This is where paths to audio files are stored.</p>"},{"location":"scripts/fix_audio_path/#setup","title":"Setup","text":"<p>The modification consists of adding a prefix to the path. Edit the variables <code>PREFIX</code> and <code>TARGET</code> in the script. It is very easy to implement other modifications using this as a basis (modifying attributes of entities).</p> <p>Requirements:</p> <pre><code>pip install beautifulsoup4\n</code></pre>"},{"location":"scripts/fix_audio_path/#execution","title":"Execution","text":"<pre><code>python fix_audio_path.py\n\nChanging file-1.wav to:\n/home/audio/file-1.wav\n...\n</code></pre>"},{"location":"scripts/fix_audio_path/#source","title":"Source","text":"<pre><code># Copyright (c) 2023 Florian Matter &lt;flmt@mailbox.org&gt;\n# Licensed under the MIT License, see below\n# The file you want to modify.\nTARGET = \"path/to/my_lexicon.lift\"\n# The string to be added to a path.\nPREFIX = \"/path/to/my/audio/\"\nfrom bs4 import BeautifulSoup\nwith open(TARGET) as fp:\n    soup = BeautifulSoup(fp, \"xml\")\nfor media in soup.find_all(\"media\"):\n    if \"href\" in media.attrs:\n        old = media[\"href\"]\n        if PREFIX not in old:\n            new = PREFIX + old\n            print(f\"Changing {old} to:\\n{new}\")\n            media[\"href\"] = new\nwith open(TARGET, \"w\") as f:\n    f.write(str(soup))\n\n# Permission is hereby granted, free of charge, to any person obtaining a copy\n# of this software and associated documentation files (the \"Software\"), to deal\n# in the Software without restriction, including without limitation the rights\n# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n# copies of the Software, and to permit persons to whom the Software is\n# furnished to do so, subject to the following conditions:\n# The above copyright notice and this permission notice shall be included in all\n# copies or substantial portions of the Software.\n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n# SOFTWARE.\n</code></pre>"}]}